<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script>
function readGameJson(url, callback)
{
	$.ajax({
	  url: url,
	  dataType: 'json',
	  success: function(result){
	    //alert("token recieved: " + result.token);
	    callback(result);
	  },
	  error: function(request, textStatus, errorThrown) {
	    alert(textStatus);
	  },
	  complete: function(request, textStatus) { //for additional info
	    //alert(request.responseText);
	    //alert(textStatus);
	  }
	});
}

function print(ch)
{
	var textArea = $('chatArea');
	var curr = textArea.val();
	curr.val(curr + ch);
}

function displayLine(line)
{
	for (var c in line)
	{
		print(c);
	}
	print('\n');
}

function displayNode(node)
{
	for (var line in node.lines)
	{
		displayLine(line);
	}
}

$(document).ready(function() {
	readGameJson("game.json", function(data) {
		var node = data[0];
		displayNode(node);
	});
});

</script>
</head>
<body>
<h1>Chattr Client</h1>
<h2>Msg from DefinitelyNotABot1337</h2>
<textarea rows="30" cols="80" id="chatArea" name="chatArea"></textarea>
</body>
</html>